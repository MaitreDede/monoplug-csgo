"use strict";angular.module("liveserver",["SignalR","ui.router","ui.bootstrap"]).controller("demoController",["$scope","Hub","$timeout","GameEvent","$injector",function(n,t,i,r,u){var e,o,f;n.error="";n.lastEvents=[];n.players=[];n.bomb={planting:!1,planted:!1,ticking:!1,exploded:!1,defused:!1};n.serverId="Demo";u.has("lsConfig")&&u.invoke(["lsConfig",function(t){n.serverId=t.serverId}]);e=null;n.hubConnectDone=function(){n.error="connected : (status="+e.connection.state+")";e.hello(n.serverId).done(function(){n.$apply(function(){n.error="listening..."})})};n.hubConnectFail=function(t){console.log(t);n.error=t};o=function(){e.connection.start().done(function(){n.$apply(function(){n.hubConnectDone()})}).fail(function(t){n.$apply(function(){n.hubConnectFail(t)})})};e=new t("webUIHub",{listeners:{RaiseEvent:function(t,i){n.$apply(function(){n.hubRaiseEvent(t,i)})},SetPlayers:function(t,i){n.$apply(function(){n.hubSetPlayers(t,i)})}},methods:["hello"],errorHandler:function(t){console.error(t);n.error=t},hubDisconnected:function(){n.$apply(function(){n.error="connecting..."});o()}});n.hubSetPlayers=function(t,i){n.players=i};f=function(t,r,u){for(var e,f=0;f<n.players.length;f++)if(e=n.players[f],e.Id==t){r&&r(e);u&&i(function(){u(e)},0);break}};n.hubRaiseEvent=function(t,u){var e,o;switch(u.name){case r.weapon_fire:f(u.userid,function(n){n.weapon_fire=!0},function(n){n.weapon_fire=!1});return;case r.enter_buyzone:f(u.userid,function(n){n.buyzone_in=!0;n.buyzone_canbuy=u.canbuy});return;case r.exit_buyzone:f(u.userid,function(n){n.buyzone_in=!1;n.buyzone_canbuy=u.canbuy});return;case r.enter_bombzone:f(u.userid,function(n){n.bombzone_in=!0;n.bombzone_hasbomb=u.hasbomb});return;case r.exit_bombzone:f(u.userid,function(n){n.bombzone_in=!1;n.bombzone_hasbomb=u.hasbomb});return;case r.bomb_beginplant:n.bomb.planting=!0;break;case r.bomb_abortplant:n.bomb.planting=!1;break;case r.bomb_planted:n.bomb.planting=!1;n.bomb.planted=!0;break;case r.bomb_defused:n.bomb.planting=!1;n.bomb.planted=!1;break;case r.bomb_exploded:n.bomb.planting=!1;n.bomb.planted=!0;break;case r.bomb_beep:n.bomb.ticking=!0;i(function(){n.bomb.ticking=!1},0);break;case r.bomb_dropped:for(e=0;e<n.players.length;e++)o=n.players[e].hasbomb=!1;break;case r.bomb_pickup:f(u.userid,function(n){n.hasbomb=!0});break;case r.player_hurt:f(u.userid,function(n){n.Health=u.health;n.Armor=u.armor});return;case r.player_blind:f(u.userid,function(n){n.blinded=!0},function(n){n.blinded=!1});break;case r.player_jump:case r.weapon_reload:case r.item_pickup:case r.player_avenged_teammate:case r.item_equip:return}for(n.lastEvents.splice(0,0,u);n.lastEvents.length>50;)n.lastEvents.splice(49,1)};o()}]);
//# sourceMappingURL=liveserver.min.js.map
